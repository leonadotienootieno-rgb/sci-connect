{% extends 'base.html' %}

{% block content %}
<div class="container my-5">
    <div class="row justify-content-center">
        <div class="col-md-10">

            <div class="card p-4 shadow-lg">
                <h1 class="card-title text-primary">{{ job.title }}</h1>
                <h3 class="card-subtitle text-muted mb-4">{{ job.employer.company_name }}</h3>

                <div class="row mb-4">
                    <div class="col-md-6">
                        <span class="badge bg-secondary me-2">{{ job.get_job_type_display }}</span>
                        <span class="badge bg-info me-2"><i class="bi bi-geo-alt"></i> {{ job.location }}</span>
                        {% if job.is_internship %}
                            <span class="badge bg-warning text-dark">Internship</span>
                        {% endif %}
                    </div>
                    <div class="col-md-6 text-md-end">
                        <p class="text-muted mb-0">Posted: {{ job.posted_at|date:"M d, Y" }}</p>
                        <p class="text-danger mb-0">Application Deadline: {{ job.deadline|date:"M d, Y" }}</p>
                    </div>
                </div>

                <hr>

                <h4 class="mt-4">Job Description</h4>
                <div class="lead text-dark" style="white-space: pre-wrap;">{{ job.description }}</div>

                <h4 class="mt-4">Requirements & Qualifications</h4>
                <div class="text-dark" style="white-space: pre-wrap;">{{ job.requirements }}</div>

                <hr class="my-4">

                {% if user.is_authenticated and user.is_student %}
                    <a href="{% url 'job_apply_view' job_id=job.id %}" class="btn btn-primary btn-lg w-100">
                        Apply Now
                    </a>
                {% elif user.is_authenticated and user.is_employer %}
                    <div class="alert alert-info text-center">
                        You are logged in as an Employer.
                    </div>
                {% else %}
                    <div class="alert alert-warning text-center">
                        <a href="{% url 'login' %}?next={% url 'job_detail_view' job_id=job.id %}" class="alert-link">
                            Log in as a Student
                        </a> to apply for this opportunity.
                    </div>
                {% endif %}

            </div>
        </div>
    </div>
</div>
{% endblock %}